OBJS =	OBJ/MAIN.o		\
	OBJ/READCNTL.o  	\
	OBJ/SKIP_COMMENTS.o	\
	OBJ/READ_LSC.o		\
	OBJ/CHECK_LSC.o	        \
	OBJ/READ_INITIAL.o	\
	OBJ/READ_FORCING.o	\
	OBJ/CHECK_FORCING.o	\
	OBJ/CALC_WEIGHTS.o	\
	OBJ/DQSDT.o		\
	OBJ/DQS.o		\
	OBJ/QDATAP.o  		\
	OBJ/E.o  		\
	OBJ/SFLXALL_SRC_VER_2.8.o	\
	OBJ/GRIBOUT.o		\
        OBJ/grib2_wrt_g2func.o  \
	OBJ/LOCALTIME.o       \
	OBJ/COSZENITH.o      \
	OBJ/ZTERP.o          \
	OBJ/FINTERP.o       

FC = ifort -convert big_endian
#LIBS= /nwprod/lib/libip_d.a \
#      /nwprod/lib/libbacio_4.a \
#      /nwprod/lib/libw3nco_4.a

LIBS =  -L /nwprod/lib -lg2_4 -lw3nco_4 -lw3emc_4 -lbacio_4 -ljasper -lpng -lz                            
PROGRAM = nldas_noah_ldas
FFLAGS= -extend-source -c  
LFLAGS= -O3

$(PROGRAM): $(OBJS)
	    $(FC) $(LFLAGS) $(OBJS) $(LIBS) -o $(PROGRAM)

clean:
	/bin/rm -f OBJ/*.o $(PROGRAM)

OBJ/MAIN.o: DRIVER/MAIN.f DRIVER/MAIN.h
	$(FC) $(FFLAGS) DRIVER/MAIN.f -o OBJ/MAIN.o

OBJ/READCNTL.o: DRIVER/READCNTL.f
	$(FC) $(FFLAGS) DRIVER/READCNTL.f -o OBJ/READCNTL.o

OBJ/SKIP_COMMENTS.o: DRIVER/SKIP_COMMENTS.f
	$(FC) $(FFLAGS) DRIVER/SKIP_COMMENTS.f -o OBJ/SKIP_COMMENTS.o

OBJ/READ_LSC.o: DRIVER/READ_LSC.f
	$(FC) $(FFLAGS) DRIVER/READ_LSC.f -o OBJ/READ_LSC.o

OBJ/CHECK_LSC.o: DRIVER/CHECK_LSC.f
	$(FC) $(FFLAGS) DRIVER/CHECK_LSC.f -o OBJ/CHECK_LSC.o

OBJ/READ_INITIAL.o: DRIVER/READ_INITIAL.f
	$(FC) $(FFLAGS) DRIVER/READ_INITIAL.f -o OBJ/READ_INITIAL.o

OBJ/READ_FORCING.o: DRIVER/READ_FORCING.f
	$(FC) $(FFLAGS) DRIVER/READ_FORCING.f -o OBJ/READ_FORCING.o

OBJ/CHECK_FORCING.o: DRIVER/CHECK_FORCING.f
	$(FC) $(FFLAGS) DRIVER/CHECK_FORCING.f -o OBJ/CHECK_FORCING.o

OBJ/CALC_WEIGHTS.o: DRIVER/CALC_WEIGHTS.f
	$(FC) $(FFLAGS) DRIVER/CALC_WEIGHTS.f -o OBJ/CALC_WEIGHTS.o

OBJ/DQSDT.o: DRIVER/DQSDT.f
	$(FC) $(FFLAGS) DRIVER/DQSDT.f -o OBJ/DQSDT.o

OBJ/DQS.o: DRIVER/DQS.f
	$(FC) $(FFLAGS) DRIVER/DQS.f -o OBJ/DQS.o

OBJ/QDATAP.o: DRIVER/QDATAP.f
	$(FC) $(FFLAGS) DRIVER/QDATAP.f -o OBJ/QDATAP.o

OBJ/E.o: SOURCE/E.f
	$(FC) $(FFLAGS) SOURCE/E.f -o OBJ/E.o

OBJ/SFLXALL_SRC_VER_2.8.o: SOURCE/SFLXALL_SRC_VER_2.8.f
	$(FC) $(FFLAGS) SOURCE/SFLXALL_SRC_VER_2.8.f -o OBJ/SFLXALL_SRC_VER_2.8.o

OBJ/GRIBOUT.o: DRIVER/GRIBOUT.f
	$(FC) $(FFLAGS) DRIVER/GRIBOUT.f -o OBJ/GRIBOUT.o

OBJ/grib2_wrt_g2func.o: DRIVER/grib2_wrt_g2func.f
	$(FC) $(FFLAGS) DRIVER/grib2_wrt_g2func.f -o OBJ/grib2_wrt_g2func.o

OBJ/LOCALTIME.o: DRIVER/LOCALTIME.f
	$(FC) $(FFLAGS) DRIVER/LOCALTIME.f -o OBJ/LOCALTIME.o

OBJ/COSZENITH.o: DRIVER/COSZENITH.f
	$(FC) $(FFLAGS) DRIVER/COSZENITH.f -o OBJ/COSZENITH.o

OBJ/ZTERP.o: DRIVER/ZTERP.f
	$(FC) $(FFLAGS) DRIVER/ZTERP.f -o OBJ/ZTERP.o

OBJ/FINTERP.o: DRIVER/FINTERP.f
	$(FC) $(FFLAGS) DRIVER/FINTERP.f -o OBJ/FINTERP.o

